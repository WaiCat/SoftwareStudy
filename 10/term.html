<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DOM</title>
    <style>
        fieldset{
            display:none;
        }
    </style>
</head>
<script>
    var users = [];

    function back() {
        document.getElementById("sib").style.display = "block";
        document.getElementById("sub").style.display = "block";
        document.getElementById("signin").style.display = "none";
        document.getElementById("signup").style.display = "none";
    }

    function signup() {
        document.getElementById("sib").style.display = "none";
        document.getElementById("sub").style.display = "none";
        document.getElementById("signin").style.display = "block";

        return false;
    }
    function signupfuntion() {
        var username = document.getElementById("username1").value;
        var password = document.getElementById("password1").value;
        console.log(users.length);
        for (var i = 0; i < users.length; i++) {
            if (username == users[i].username) {
                document.getElementById("username1").value = "";
                document.getElementById("password1").value = "";
                alert("이미 있는 아이디 입니다. 다시 입력하세요");
                return false;
            }
        }
        let user = { username: username, password: password };
        alert("회원가입이 완료되었습니다")
        users.push(user);
        back();
        document.getElementById("username1").value = "";
        document.getElementById("password1").value = "";

        return false;
    }


    function signin() {
        document.getElementById("sib").style.display = "none";
        document.getElementById("sub").style.display = "none";
        document.getElementById("signup").style.display = "block";

        return false;
    }
    function signinfuntion() {
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;

        if (username == "admin" && password == "admin") {
            alert("Admin 계정 로그인")
            document.querySelector('#user').style.display = "block";
            document.querySelector('#adminset').style.display = "block";
            document.getElementById("display-username").textContent = username;
            document.getElementById("display-password").textContent = password;
        } else {
            for (var i = 0; i < users.length; i++) {
                if (username == users[i].username && password == users[i].password) {
                    document.querySelector('#user').style.display = "block";
                    document.getElementById("display-username").textContent = username;
                    document.getElementById("display-password").textContent = password;
                    alert("로그인 완료");
                    document.getElementById("username").value = "";
                    document.getElementById("password").value = "";
                    return false;
                }
            }
            alert("로그인 실패");
            back();
            document.getElementById("username").value = "";
            document.getElementById("password").value = "";

        }
        return false; // 폼 제출 방지
    }
    function loginout() {

    }
    function showusers() {
        document.querySelector('#usermanage').style.display = "block";
        let list = '';
            for (let i = 0; i < users.length; i++) {
                let user = users[i];
                list = "username : " + user.username + ' ' + "password : " + user.password + '<br/>';
                $('<p></p>').text(list).appendTo("#userlist");
                $('<button></button>').text("수강목록").appendTo("#userlist");
                $('<button></button>').text("회원삭제").appendTo("#userlist");
            }
        document.getElementById('userlist').innerHTML = list;
    }
</script>

<body>
    <button id="sib" onclick="signup()">회원가입</button>

    <button id="sub" onclick="signin()">로그인</button>

    <fieldset id="signin">
        <legend> 회원가입</legend>
        <p>
            <label for="username1">사용자 이름:</label>
            <input type="text" id="username1" name="username1" required>
        </p>
        <p>
            <label for="password1">비밀번호:</label>
            <input type="password" id="password1" name="password1" required>
        </p>
        <p>
            <input type="submit" style="margin-right:20px" value="회원가입" onclick="signupfuntion()">
            <input type="reset" value="뒤로가기" onclick="back()">
        </p>
    </fieldset>

    <fieldset id="signup">
        <legend> 로그인</legend>
        <p>
            <label for="username">사용자 이름:</label>
            <input type="text" id="username" name="username" required>
        </p>
        <p>
            <label for="password">비밀번호:</label>
            <input type="password" id="password" name="password" required>
        </p>
        <p>
            <input type="submit" value="로그인" onclick="signinfuntion()">
            <input type="reset" value="뒤로가기" onclick="back()">
        </p>
    </fieldset>

    <fieldset id="user">
        <h3>입력된 정보:</h3>
        <p>아이디: <span id="display-username"></span></p>
        <p>비밀번호: <span id="display-password"></span></p>
        <button onclick="loginout()">로그아웃</button>
        
    </fieldset>

    <fieldset id="adminset">
        <button id = "userm" onclick="showusers()">유저 관리</button>
        <button id = "lecm" >강의 관리</button>
    </fieldset>
    <fieldset id="usermanage">
        <div id = "userlist">유저 목록이 없습니다.</div>
    </fieldset>
    <fieldset id="lecmanage">
        
    </fieldset>

    



</body>

</html>